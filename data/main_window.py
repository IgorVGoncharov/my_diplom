from PyQt5 import QtCore, QtGui, QtWidgets
from db import banks, clients, data_base
from constants import *

class Ui_MainWindow(object):


    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(1280, 960)
        MainWindow.setStyleSheet("")
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.verticalLayout = QtWidgets.QVBoxLayout(self.centralwidget)
        self.verticalLayout.setContentsMargins(0, 0, 0, 0)
        self.verticalLayout.setSpacing(0)
        self.verticalLayout.setObjectName("verticalLayout")
        self.frame_3 = QtWidgets.QFrame(self.centralwidget)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Preferred, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.frame_3.sizePolicy().hasHeightForWidth())
        self.frame_3.setSizePolicy(sizePolicy)
        self.frame_3.setMinimumSize(QtCore.QSize(0, 115))
        self.frame_3.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.frame_3.setFrameShadow(QtWidgets.QFrame.Plain)
        self.frame_3.setObjectName("frame_3")
        
        
        
        
        
        

        
       
        

        

 
        
        self.plainTextEdit = QtWidgets.QPlainTextEdit(self.frame_3)
        self.plainTextEdit.setGeometry(QtCore.QRect(6, 73, 101, 41))
        font = QtGui.QFont()
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.plainTextEdit.setFont(font)
        self.plainTextEdit.setStyleSheet("background: transparent")
        self.plainTextEdit.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.plainTextEdit.setVerticalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)
        self.plainTextEdit.setUndoRedoEnabled(True)
        self.plainTextEdit.setObjectName("plainTextEdit")
        self.plainTextEdit_2 = QtWidgets.QPlainTextEdit(self.frame_3)
        self.plainTextEdit_2.setGeometry(QtCore.QRect(103, 75, 81, 87))
        font = QtGui.QFont()
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.plainTextEdit_2.setFont(font)
        self.plainTextEdit_2.setStyleSheet("background: transparent")
        self.plainTextEdit_2.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.plainTextEdit_2.setObjectName("plainTextEdit_2")
        self.plainTextEdit_3 = QtWidgets.QPlainTextEdit(self.frame_3)
        self.plainTextEdit_3.setGeometry(QtCore.QRect(200, 75, 71, 87))
        font = QtGui.QFont()
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.plainTextEdit_3.setFont(font)
        self.plainTextEdit_3.setStyleSheet("background: transparent")
        self.plainTextEdit_3.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.plainTextEdit_3.setObjectName("plainTextEdit_3")
        self.plainTextEdit_4 = QtWidgets.QPlainTextEdit(self.frame_3)
        self.plainTextEdit_4.setGeometry(QtCore.QRect(260, 75, 131, 101))
        font = QtGui.QFont()
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.plainTextEdit_4.setFont(font)
        self.plainTextEdit_4.setStyleSheet("background: transparent")
        self.plainTextEdit_4.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.plainTextEdit_4.setObjectName("plainTextEdit_4")
        self.plainTextEdit_5 = QtWidgets.QPlainTextEdit(self.frame_3)
        self.plainTextEdit_5.setGeometry(QtCore.QRect(375, 73, 131, 101))
        font = QtGui.QFont()
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.plainTextEdit_5.setFont(font)
        self.plainTextEdit_5.setStyleSheet("background: transparent")
        self.plainTextEdit_5.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.plainTextEdit_5.setObjectName("plainTextEdit_5")
        self.plainTextEdit_6 = QtWidgets.QPlainTextEdit(self.frame_3)
        self.plainTextEdit_6.setGeometry(QtCore.QRect(490, 75, 111, 87))
        font = QtGui.QFont()
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.plainTextEdit_6.setFont(font)
        self.plainTextEdit_6.setStyleSheet("background: transparent")
        self.plainTextEdit_6.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.plainTextEdit_6.setObjectName("plainTextEdit_6")
        self.plainTextEdit_7 = QtWidgets.QPlainTextEdit(self.frame_3)
        self.plainTextEdit_7.setGeometry(QtCore.QRect(600, 75, 111, 87))
        font = QtGui.QFont()
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.plainTextEdit_7.setFont(font)
        self.plainTextEdit_7.setStyleSheet("background: transparent")
        self.plainTextEdit_7.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.plainTextEdit_7.setObjectName("plainTextEdit_7")
        self.plainTextEdit_8 = QtWidgets.QPlainTextEdit(self.frame_3)
        self.plainTextEdit_8.setGeometry(QtCore.QRect(710, 75, 111, 87))
        font = QtGui.QFont()
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.plainTextEdit_8.setFont(font)
        self.plainTextEdit_8.setStyleSheet("background: transparent")
        self.plainTextEdit_8.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.plainTextEdit_8.setObjectName("plainTextEdit_8")
        self.verticalLayout.addWidget(self.frame_3)
        self.frame_2 = QtWidgets.QFrame(self.centralwidget)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Preferred, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.frame_2.sizePolicy().hasHeightForWidth())
        self.frame_2.setSizePolicy(sizePolicy)
        self.frame_2.setMinimumSize(QtCore.QSize(0, 62))
        self.frame_2.setStyleSheet("background-color: rgb(235, 235, 235);")
        self.frame_2.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.frame_2.setFrameShadow(QtWidgets.QFrame.Plain)
        self.frame_2.setObjectName("frame_2")
        self.pushButton_3 = QtWidgets.QPushButton(self.frame_2)
        self.pushButton_3.setGeometry(QtCore.QRect(10, 3, 56, 56))
        self.pushButton_3.setStyleSheet("")
        self.pushButton_3.setText("")
        icon8 = QtGui.QIcon()
        icon8.addPixmap(QtGui.QPixmap("../../../../My_final_work/icons/document_add_256_icon-icons.com_75994.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        self.pushButton_3.setIcon(icon8)
        self.pushButton_3.setIconSize(QtCore.QSize(56, 56))
        self.pushButton_3.setFlat(True)
        self.pushButton_3.setObjectName("pushButton_3")
        self.pushButton_4 = QtWidgets.QPushButton(self.frame_2)
        self.pushButton_4.setGeometry(QtCore.QRect(70, 3, 56, 56))
        self.pushButton_4.setStyleSheet("")
        self.pushButton_4.setText("")
        icon9 = QtGui.QIcon()
        icon9.addPixmap(QtGui.QPixmap("../../../../My_final_work/icons/edit-file256_25239.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        self.pushButton_4.setIcon(icon9)
        self.pushButton_4.setIconSize(QtCore.QSize(56, 56))
        self.pushButton_4.setFlat(True)
        self.pushButton_4.setObjectName("pushButton_4")
        self.pushButton_5 = QtWidgets.QPushButton(self.frame_2)
        self.pushButton_5.setGeometry(QtCore.QRect(130, 3, 56, 56))
        self.pushButton_5.setStyleSheet("")
        self.pushButton_5.setText("")
        icon10 = QtGui.QIcon()
        icon10.addPixmap(QtGui.QPixmap("../../../../My_final_work/icons/document_delete_256_icon-icons.com_75995.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        self.pushButton_5.setIcon(icon10)
        self.pushButton_5.setIconSize(QtCore.QSize(56, 56))
        self.pushButton_5.setFlat(True)
        self.pushButton_5.setObjectName("pushButton_5")
        self.verticalLayout.addWidget(self.frame_2)
        self.frame = QtWidgets.QFrame(self.centralwidget)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Preferred, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.frame.sizePolicy().hasHeightForWidth())
        self.frame.setSizePolicy(sizePolicy)
        self.frame.setMinimumSize(QtCore.QSize(0, 50))
        self.frame.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.frame.setFrameShadow(QtWidgets.QFrame.Plain)
        self.frame.setObjectName("frame")
        self.horizontalLayout_2 = QtWidgets.QHBoxLayout(self.frame)
        self.horizontalLayout_2.setContentsMargins(6, 6, 6, 6)
        self.horizontalLayout_2.setObjectName("horizontalLayout_2")
        self.frame_4 = QtWidgets.QFrame(self.frame)
        self.frame_4.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.frame_4.setFrameShadow(QtWidgets.QFrame.Plain)
        self.frame_4.setLineWidth(5)
        self.frame_4.setMidLineWidth(2)
        self.frame_4.setObjectName("frame_4")
        self.horizontalLayout = QtWidgets.QHBoxLayout(self.frame_4)
        self.horizontalLayout.setContentsMargins(7, 2, 2, 2)
        self.horizontalLayout.setSpacing(7)
        self.horizontalLayout.setObjectName("horizontalLayout")
        self.comboBox = QtWidgets.QComboBox(self.frame_4)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.comboBox.sizePolicy().hasHeightForWidth())
        self.comboBox.setSizePolicy(sizePolicy)
        self.comboBox.setMinimumSize(QtCore.QSize(230, 22))
        self.comboBox.setObjectName("comboBox")
        self.comboBox.addItem("")
        self.horizontalLayout.addWidget(self.comboBox)
        self.comboBox_2 = QtWidgets.QComboBox(self.frame_4)
        self.comboBox_2.setObjectName("comboBox_2")
        self.comboBox_2.addItem("")
        self.horizontalLayout.addWidget(self.comboBox_2)
        self.pushButton_2 = QtWidgets.QPushButton(self.frame_4)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.pushButton_2.sizePolicy().hasHeightForWidth())
        self.pushButton_2.setSizePolicy(sizePolicy)
        self.pushButton_2.setMinimumSize(QtCore.QSize(33, 33))
        self.pushButton_2.setMaximumSize(QtCore.QSize(35, 35))
        self.pushButton_2.setAutoFillBackground(False)
        self.pushButton_2.setStyleSheet("")
        self.pushButton_2.setText("")
        icon11 = QtGui.QIcon()
        icon11.addPixmap(QtGui.QPixmap("../../../../My_final_work/icons/search.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        self.pushButton_2.setIcon(icon11)
        self.pushButton_2.setIconSize(QtCore.QSize(33, 33))
        self.pushButton_2.setFlat(True)
        self.pushButton_2.setObjectName("pushButton_2")
        self.horizontalLayout.addWidget(self.pushButton_2)
        self.horizontalLayout_2.addWidget(self.frame_4)
        self.frame_5 = QtWidgets.QFrame(self.frame)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Preferred)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.frame_5.sizePolicy().hasHeightForWidth())
        self.frame_5.setSizePolicy(sizePolicy)
        self.frame_5.setMinimumSize(QtCore.QSize(226, 0))
        self.frame_5.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.frame_5.setFrameShadow(QtWidgets.QFrame.Plain)
        self.frame_5.setLineWidth(5)
        self.frame_5.setMidLineWidth(2)
        self.frame_5.setObjectName("frame_5")
        self.comboBox_3 = QtWidgets.QComboBox(self.frame_5)
        self.comboBox_3.setGeometry(QtCore.QRect(7, 7, 178, 22))
        self.comboBox_3.setObjectName("comboBox_3")
        self.comboBox_3.addItem("")
        self.pushButton = QtWidgets.QPushButton(self.frame_5)
        self.pushButton.setGeometry(QtCore.QRect(190, 3, 33, 33))
        self.pushButton.setMinimumSize(QtCore.QSize(33, 33))
        self.pushButton.setMaximumSize(QtCore.QSize(35, 35))
        self.pushButton.setAutoFillBackground(False)
        self.pushButton.setStyleSheet("")
        self.pushButton.setText("")
        self.pushButton.setIcon(icon11)
        self.pushButton.setIconSize(QtCore.QSize(33, 33))
        self.pushButton.setFlat(True)
        self.pushButton.setObjectName("pushButton")
        self.horizontalLayout_2.addWidget(self.frame_5)
        self.verticalLayout.addWidget(self.frame)
        





        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtWidgets.QMenuBar(MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 1280, 26))
        self.menubar.setObjectName("menubar")
        self.menu = QtWidgets.QMenu(self.menubar)
        self.menu.setObjectName("menu")
        MainWindow.setMenuBar(self.menubar)
        self.statusbar = QtWidgets.QStatusBar(MainWindow)
        self.statusbar.setObjectName("statusbar")
        MainWindow.setStatusBar(self.statusbar)
        self.menubar.addAction(self.menu.menuAction())

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "Валютный контроль"))
        self.plainTextEdit.setPlainText(_translate("MainWindow", "      Банк\n"
"(Филиалы)"))
        self.plainTextEdit_2.setPlainText(_translate("MainWindow", "Клиенты"))
        self.plainTextEdit_3.setPlainText(_translate("MainWindow", "Счета"))
        self.plainTextEdit_4.setPlainText(_translate("MainWindow", "Контрагенты"))
        self.plainTextEdit_5.setPlainText(_translate("MainWindow", "        Банки\n"
"Контрагентов"))
        self.plainTextEdit_6.setPlainText(_translate("MainWindow", "Контракты"))
        self.plainTextEdit_7.setPlainText(_translate("MainWindow", "Платежи"))
        self.plainTextEdit_8.setPlainText(_translate("MainWindow", "ПД"))
        self.comboBox.setItemText(0, _translate("MainWindow", "< Все Клиенты Банка >"))
        self.comboBox_2.setItemText(0, _translate("MainWindow", "АО \"Рога и копыта\" "))
        self.comboBox_3.setItemText(0, _translate("MainWindow", "13050004/1000/0030/2/1"))
        self.menu.setTitle(_translate("MainWindow", "Файл"))

        """__________________________________________________________________________________________________"""
        '''Таблицы'''
        self.empty_table = QtWidgets.QTableWidget(self.centralwidget)
        self.empty_table.setStyleSheet("background-color: rgb(170, 170, 170);")
        self.verticalLayout.addWidget(self.empty_table)

        self.current_table = self.empty_table 

        self.banks_table = QtWidgets.QTableWidget(self.centralwidget)
        self.set_table_all(self.banks_table, BANK_HEADERS_LABELS, banks)
        self.banks_table.hide()
        self.client_table = QtWidgets.QTableWidget(self.centralwidget)
        self.set_table_all(self.client_table, CLIENTS_HEADERS_LABELS, clients)
        self.client_table.hide()
        self.accounts_table = QtWidgets.QTableWidget(self.centralwidget)
        self.accounts_table.hide()
        self.partners_table = QtWidgets.QTableWidget(self.centralwidget)
        self.partners_table.hide()
        self.partners_banks_table = QtWidgets.QTableWidget(self.centralwidget)
        self.partners_banks_table.hide()
        self.unic_contr_numb_table = QtWidgets.QTableWidget(self.centralwidget)
        self.unic_contr_numb_table.hide()
        self.payments_table = QtWidgets.QTableWidget(self.centralwidget)
        self.payments_table.hide()
        
        self.supp_doc_table = QtWidgets.QTableWidget(self.centralwidget)
        self.supp_doc_table.hide()

        """_________________________________"""
        """Создание кнопок """
        self.bank_button = QtWidgets.QPushButton(self.frame_3)
        self.button_create(self.bank_button, 15, 4, 75, 75, "../../../../My_final_work/icons/bank.png")
        self.client_button = QtWidgets.QPushButton(self.frame_3)
        self.button_create(self.client_button, 105, 4, 75, 75, "../../../../My_final_work/icons/client.png")
        self.account_button = QtWidgets.QPushButton(self.frame_3)
        self.button_create(self.account_button, 185, 4, 75, 75, "../../../../My_final_work/icons/counts.png")
        self.partners_button = QtWidgets.QPushButton(self.frame_3)
        self.button_create(self.partners_button, 280, 4, 75, 75, "../../../../My_final_work/icons/partners.png")
        self.partners_banks_button = QtWidgets.QPushButton(self.frame_3)
        self.button_create(self.partners_banks_button, 395, 4, 75, 75, "../../../../My_final_work/icons/inobanks.png")
        self.unic_contr_button = QtWidgets.QPushButton(self.frame_3)
        self.button_create(self.unic_contr_button, 500, 4, 75, 75, "../../../../My_final_work/icons/contracts.png")
        self.payments_button = QtWidgets.QPushButton(self.frame_3)
        self.button_create(self.payments_button, 600, 4, 75, 75, "../../../../My_final_work/icons/payments.png")

        
        self.supp_doc_button = QtWidgets.QPushButton(self.frame_3)
        self.button_create(self.supp_doc_button, 690, 4, 75, 75, "../../../../My_final_work/icons/pd.png")
        
        

        """Функции кнопок"""



        self.bank_button.clicked.connect(lambda: self.hide_show_tables(self.banks_table))
        self.client_button.clicked.connect(lambda: self.hide_show_tables(self.client_table))
        self.account_button.clicked.connect(lambda: self.open_client_link_tables(self.accounts_table, ACCOUNTS_REQUEST, ACCOUNTS_HEADERS_LABELS))
        self.partners_button.clicked.connect(lambda: self.open_client_link_tables(self.partners_table, PARTNERS_REQUEST, COUNTERS_HEADERS_LABELS))
        self.partners_banks_button.clicked.connect(lambda: self.open_client_link_tables(self.partners_banks_table, PARTNERS_BANKS_REQUEST, COUNTERS_BANKS_HEADERS_LABELS))
        self.unic_contr_button.clicked.connect(lambda: self.open_client_link_tables(self.unic_contr_numb_table, UNIC_CONTR_NUMB_REQUEST, UNIC_CONTR_NUMB_LABELS))
        self.payments_button.clicked.connect(lambda: self.open_client_link_tables(self.payments_table, PAYMENT_REQUEST, PAYMENTS_LABELS))
        self.supp_doc_button.clicked.connect(lambda: self.open_client_link_tables(self.supp_doc_table, SUPP_DOC_REQUEST, SUPP_DOC_LABELS))
        
        self.pushButton.clicked.connect(self.push)

    def button_create(self, button_name, loc_x, loc_y, length, high, icon_loc):
        button_name.setGeometry(QtCore.QRect(loc_x, loc_y, length, high))
        icon1 = QtGui.QIcon()
        icon1.addPixmap(QtGui.QPixmap(icon_loc), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        button_name.setIcon(icon1)
        button_name.setIconSize(QtCore.QSize(length, high))
        button_name.setFlat(True)

    def set_table_all(self, table_name, headers_labels, info_from_db):
        columns_count = len(headers_labels)
        row_count = len(info_from_db)
        table_name.setStyleSheet("background-color: rgb(170, 170, 170);")
        self.verticalLayout.addWidget(table_name)
        table_name.setColumnCount(columns_count)
        table_name.setRowCount(row_count)
        table_name.setHorizontalHeaderLabels(headers_labels)
        table_name.item
        for i in range(columns_count):
            for j in range(row_count):
                table_name.setItem(j, i, QtWidgets.QTableWidgetItem(str(info_from_db[j][i]) + '        '))
                if j % 2 == 0:
                    table_name.item(j, i).setBackground(QtGui.QColor(210, 210, 210))
                else:
                    table_name.item(j, i).setBackground(QtGui.QColor(240, 240, 240))
        table_name.resizeColumnsToContents()

    def push(self):
        #print(self.client_table.item(1, 1).text())
        print(self.client_table.currentRow())
        #self.opened_table.hide()

    def hide_show_tables(self, table_name):
        self.current_table.hide()
        self.current_table = table_name
        self.current_table.show()

    def open_client_link_tables(self, table_name, request, labels):
        self.hide_show_tables(table_name)
        accounts_data = data_base.select_from_db_choiced(request, self.client_table.currentRow()+1)
        self.set_table_all(table_name, labels, accounts_data)

    def create_dinamic_tables():
    
        """Думаю удалить"""
        #self.tableWidget_1.hide()
        #self.tableWidget.setFrameShape(QtWidgets.QFrame.NoFrame)
        #self.tableWidget.setObjectName("tableWidget")

if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()
    ui = Ui_MainWindow()
    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_())
